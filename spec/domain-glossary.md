# Domain Glossary — Codex Tasks Watcher

| Термин | Определение | Связанные термины / Примечания |
|--------|-------------|--------------------------------|
| Активная задача (Active Task) | Единица работы в Codex, которая в данный момент исполняется или ожидает завершения. Определяется по визуальным индикаторам: спиннеры прогресса, кнопка Stop, текст статуса. | Используется для расчёта `count` на вкладке и суммарного `totalActiveCount`. |
| Вкладка Codex (Codex Tab) | Окно браузера с интерфейсом Codex (`https://*.openai.com/*`), где пользователь запускает задачи. | Источник DOM-сигналов для контент-скрипта. |
| Контент-скрипт (Content Script) | Скрипт, исполняемый в контексте вкладки Codex, собирающий сигналы активности и отправляющий их в background. | Использует детекторы D1/D2/D3 и объединяет их в правило `max(D2_count, D3_count, D1_indicatorCount)`. |
| Детектор (Detector) | Алгоритм или правило, определяющее наличие активной задачи по DOM-сигнатуре. | D1 — спиннер, D2 — кнопка Stop, D3 — эвристика карточек (активируется в v0.2.0+ и участвует в расчёте `count`). |
| Сигнал (Signal) | Результат работы детектора с описанием найденного DOM-элемента или текста. | Передаётся в массиве `signals` DTO `TASKS_UPDATE`. |
| Фоновый сервис-воркер (Background Service Worker) | Скрипт Manifest V3, агрегирующий состояния вкладок, управляющий уведомлениями и настройкой `autoDiscardable`. | Хранит состояние в `chrome.storage.session`. |
| Антидребезг (Debounce Window) | Интервал ожидания (≈12–15 секунд) перед показом уведомления после перехода суммарного счётчика в 0. | Конфигурируется через `debounce.ms`, хранится в состоянии background. |
| Heartbeat | Периодический сигнал от контент-скрипта (`TASKS_HEARTBEAT`) с отметкой времени последнего сканирования DOM. | Используется background для обновления `lastSeenAt`, определения «устаревших» вкладок и повторного запроса состояния. |
| Последний контакт (Last Seen) | Максимум между временем последнего `TASKS_UPDATE` и `TASKS_HEARTBEAT` от вкладки. | Хранится в `AggregatedState.tabs[].lastSeenAt`; если текущее время превышает `lastSeenAt + heartbeatTimeout`, вкладка помечается как `STALE`. |
| Состояние вкладок (Tabs State) | Коллекция актуальной информации по каждой вкладке Codex: URL, заголовок, количество задач, сигналы. | Сохраняется в `storage.session.state.tabs`. |
| Итоговый счётчик (Total Active Count) | Сумма активных задач по всем вкладкам; триггер для уведомлений и отображения в popup. | Хранится в `state.lastTotal`. |
| Уведомление (Notification) | Системное уведомление Chrome с сообщением «Все задачи в Codex завершены», создаётся сервис-воркером. | Создаётся через `chrome.notifications.create`. |
| Popup | UI расширения, который отображает список активных задач или подтверждает их отсутствие. | Использует агрегированное состояние из background. |
| AutoDiscardable | Настройка вкладок Chrome, запрещающая автоматическое выгружение вкладки из памяти. | Выставляется background-скриптом для вкладок Codex. |
| Версия v0.1.0 | MVP версия расширения с фиксированными параметрами (без пользовательских настроек, звука и бейджа). | Базовая целевая версия текущего roadmap. |
| Версия v0.2.0+ | Последующие релизы с настройками пользователя, бейджом и звуковыми уведомлениями. | Требует дополнительных контрактов и UI. |
