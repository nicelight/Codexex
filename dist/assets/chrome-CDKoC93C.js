var E={};(function(d){Object.defineProperty(d,"__esModule",{value:!0}),d.formatNames=d.fastFormats=d.fullFormats=void 0;function y(P,q){return{validate:P,compare:q}}d.fullFormats={date:y(g,w),time:y(o,u),"date-time":y(p,b),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:r,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:K,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:s,int32:{type:"number",validate:h},int64:{type:"number",validate:A},float:{type:"number",validate:k},double:{type:"number",validate:k},password:!0,binary:!0},d.fastFormats={...d.fullFormats,date:y(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,w),time:y(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,u),"date-time":y(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,b),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},d.formatNames=Object.keys(d.fullFormats);function c(P){return P%4===0&&(P%100!==0||P%400===0)}const v=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,f=[0,31,28,31,30,31,30,31,31,30,31,30,31];function g(P){const q=v.exec(P);if(!q)return!1;const N=+q[1],S=+q[2],_=+q[3];return S>=1&&S<=12&&_>=1&&_<=(S===2&&c(N)?29:f[S])}function w(P,q){if(P&&q)return P>q?1:P<q?-1:0}const m=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function o(P,q){const N=m.exec(P);if(!N)return!1;const S=+N[1],_=+N[2],z=+N[3],j=N[5];return(S<=23&&_<=59&&z<=59||S===23&&_===59&&z===60)&&(!q||j!=="")}function u(P,q){if(!(P&&q))return;const N=m.exec(P),S=m.exec(q);if(N&&S)return P=N[1]+N[2]+N[3]+(N[4]||""),q=S[1]+S[2]+S[3]+(S[4]||""),P>q?1:P<q?-1:0}const i=/t|\s/i;function p(P){const q=P.split(i);return q.length===2&&g(q[0])&&o(q[1],!0)}function b(P,q){if(!(P&&q))return;const[N,S]=P.split(i),[_,z]=q.split(i),j=w(N,_);if(j!==void 0)return j||u(S,z)}const e=/\/|:/,n=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function r(P){return e.test(P)&&n.test(P)}const t=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function s(P){return t.lastIndex=0,t.test(P)}const a=-2147483648,l=2**31-1;function h(P){return Number.isInteger(P)&&P<=l&&P>=a}function A(P){return Number.isInteger(P)}function k(){return!0}const T=/[^\\]\\Z/;function K(P){if(T.test(P))return!1;try{return new RegExp(P),!0}catch{return!1}}})(E);const I=E.fullFormats.uri,x=E.fullFormats["date-time"],O=d=>{let y=0;for(const c of d)y+=1;return y};class $ extends Error{constructor(y,c=[]){super(`Validation failed for contract "${y}"`),this.typeName=y,this.name="ContractValidationError",this.errors=c}}const R=(()=>{const d=I;function y(c,{instancePath:v="",parentData:f,parentDataProperty:g,rootData:w=c,dynamicAnchors:m={}}={}){let o=null,u=0;const i=y.evaluated;if(i.dynamicProps&&(i.props=void 0),i.dynamicItems&&(i.items=void 0),c&&typeof c=="object"&&!Array.isArray(c)){if(c.type===void 0){const p={instancePath:v,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'"};o===null?o=[p]:o.push(p),u++}if(c.origin===void 0){const p={instancePath:v,schemaPath:"#/required",keyword:"required",params:{missingProperty:"origin"},message:"must have required property 'origin'"};o===null?o=[p]:o.push(p),u++}if(c.ts===void 0){const p={instancePath:v,schemaPath:"#/required",keyword:"required",params:{missingProperty:"ts"},message:"must have required property 'ts'"};o===null?o=[p]:o.push(p),u++}if(c.lastUpdateTs===void 0){const p={instancePath:v,schemaPath:"#/required",keyword:"required",params:{missingProperty:"lastUpdateTs"},message:"must have required property 'lastUpdateTs'"};o===null?o=[p]:o.push(p),u++}if(c.intervalMs===void 0){const p={instancePath:v,schemaPath:"#/required",keyword:"required",params:{missingProperty:"intervalMs"},message:"must have required property 'intervalMs'"};o===null?o=[p]:o.push(p),u++}for(const p in c)if(!(p==="type"||p==="origin"||p==="ts"||p==="lastUpdateTs"||p==="intervalMs"||p==="respondingToPing")){const b={instancePath:v,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:p},message:"must NOT have additional properties"};o===null?o=[b]:o.push(b),u++}if(c.type!==void 0&&c.type!=="TASKS_HEARTBEAT"){const p={instancePath:v+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue:"TASKS_HEARTBEAT"},message:"must be equal to constant"};o===null?o=[p]:o.push(p),u++}if(c.origin!==void 0){let p=c.origin;if(typeof p=="string"){if(!d(p)){const b={instancePath:v+"/origin",schemaPath:"#/properties/origin/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'};o===null?o=[b]:o.push(b),u++}}else{const b={instancePath:v+"/origin",schemaPath:"#/properties/origin/type",keyword:"type",params:{type:"string"},message:"must be string"};o===null?o=[b]:o.push(b),u++}}if(c.ts!==void 0){let p=c.ts;if(!(typeof p=="number"&&isFinite(p))){const b={instancePath:v+"/ts",schemaPath:"#/properties/ts/type",keyword:"type",params:{type:"number"},message:"must be number"};o===null?o=[b]:o.push(b),u++}}if(c.lastUpdateTs!==void 0){let p=c.lastUpdateTs;if(typeof p=="number"&&isFinite(p)){if(p<0||isNaN(p)){const b={instancePath:v+"/lastUpdateTs",schemaPath:"#/properties/lastUpdateTs/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};o===null?o=[b]:o.push(b),u++}}else{const b={instancePath:v+"/lastUpdateTs",schemaPath:"#/properties/lastUpdateTs/type",keyword:"type",params:{type:"number"},message:"must be number"};o===null?o=[b]:o.push(b),u++}}if(c.intervalMs!==void 0){let p=c.intervalMs;if(!(typeof p=="number"&&!(p%1)&&!isNaN(p)&&isFinite(p))){const b={instancePath:v+"/intervalMs",schemaPath:"#/properties/intervalMs/type",keyword:"type",params:{type:"integer"},message:"must be integer"};o===null?o=[b]:o.push(b),u++}if(typeof p=="number"&&isFinite(p)){if(p>6e4||isNaN(p)){const b={instancePath:v+"/intervalMs",schemaPath:"#/properties/intervalMs/maximum",keyword:"maximum",params:{comparison:"<=",limit:6e4},message:"must be <= 60000"};o===null?o=[b]:o.push(b),u++}if(p<1e3||isNaN(p)){const b={instancePath:v+"/intervalMs",schemaPath:"#/properties/intervalMs/minimum",keyword:"minimum",params:{comparison:">=",limit:1e3},message:"must be >= 1000"};o===null?o=[b]:o.push(b),u++}}}if(c.respondingToPing!==void 0&&typeof c.respondingToPing!="boolean"){const p={instancePath:v+"/respondingToPing",schemaPath:"#/properties/respondingToPing/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};o===null?o=[p]:o.push(p),u++}}else{const p={instancePath:v,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};o===null?o=[p]:o.push(p),u++}return y.errors=o,u===0}return y.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1},y})();function L(d){return R(d)}function Q(d){if(!L(d))throw new $("ContentScriptHeartbeat",R.errors??[])}const F=(()=>{const d={properties:{detector:{enum:["D1_SPINNER","D2_STOP_BUTTON","D3_CARD_HEUR"]}}},y=I,c=O;function v(f,{instancePath:g="",parentData:w,parentDataProperty:m,rootData:o=f,dynamicAnchors:u={}}={}){let i=null,p=0;const b=v.evaluated;if(b.dynamicProps&&(b.props=void 0),b.dynamicItems&&(b.items=void 0),f&&typeof f=="object"&&!Array.isArray(f)){if(f.type===void 0){const e={instancePath:g,schemaPath:"#/required",keyword:"required",params:{missingProperty:"type"},message:"must have required property 'type'"};i===null?i=[e]:i.push(e),p++}if(f.origin===void 0){const e={instancePath:g,schemaPath:"#/required",keyword:"required",params:{missingProperty:"origin"},message:"must have required property 'origin'"};i===null?i=[e]:i.push(e),p++}if(f.active===void 0){const e={instancePath:g,schemaPath:"#/required",keyword:"required",params:{missingProperty:"active"},message:"must have required property 'active'"};i===null?i=[e]:i.push(e),p++}if(f.count===void 0){const e={instancePath:g,schemaPath:"#/required",keyword:"required",params:{missingProperty:"count"},message:"must have required property 'count'"};i===null?i=[e]:i.push(e),p++}if(f.signals===void 0){const e={instancePath:g,schemaPath:"#/required",keyword:"required",params:{missingProperty:"signals"},message:"must have required property 'signals'"};i===null?i=[e]:i.push(e),p++}if(f.ts===void 0){const e={instancePath:g,schemaPath:"#/required",keyword:"required",params:{missingProperty:"ts"},message:"must have required property 'ts'"};i===null?i=[e]:i.push(e),p++}for(const e in f)if(!(e==="type"||e==="origin"||e==="active"||e==="count"||e==="signals"||e==="ts")){const n={instancePath:g,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:e},message:"must NOT have additional properties"};i===null?i=[n]:i.push(n),p++}if(f.type!==void 0&&f.type!=="TASKS_UPDATE"){const e={instancePath:g+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue:"TASKS_UPDATE"},message:"must be equal to constant"};i===null?i=[e]:i.push(e),p++}if(f.origin!==void 0){let e=f.origin;if(typeof e=="string"){if(!y(e)){const n={instancePath:g+"/origin",schemaPath:"#/properties/origin/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'};i===null?i=[n]:i.push(n),p++}}else{const n={instancePath:g+"/origin",schemaPath:"#/properties/origin/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[n]:i.push(n),p++}}if(f.active!==void 0&&typeof f.active!="boolean"){const e={instancePath:g+"/active",schemaPath:"#/properties/active/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[e]:i.push(e),p++}if(f.count!==void 0){let e=f.count;if(!(typeof e=="number"&&!(e%1)&&!isNaN(e)&&isFinite(e))){const n={instancePath:g+"/count",schemaPath:"#/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer"};i===null?i=[n]:i.push(n),p++}if(typeof e=="number"&&isFinite(e)&&(e<0||isNaN(e))){const n={instancePath:g+"/count",schemaPath:"#/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};i===null?i=[n]:i.push(n),p++}}if(f.signals!==void 0){let e=f.signals;if(Array.isArray(e)){const n=e.length;for(let r=0;r<n;r++){let t=e[r];if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.detector===void 0){const s={instancePath:g+"/signals/"+r,schemaPath:"#/definitions/signal/required",keyword:"required",params:{missingProperty:"detector"},message:"must have required property 'detector'"};i===null?i=[s]:i.push(s),p++}if(t.evidence===void 0){const s={instancePath:g+"/signals/"+r,schemaPath:"#/definitions/signal/required",keyword:"required",params:{missingProperty:"evidence"},message:"must have required property 'evidence'"};i===null?i=[s]:i.push(s),p++}for(const s in t)if(!(s==="detector"||s==="evidence"||s==="taskKey")){const a={instancePath:g+"/signals/"+r,schemaPath:"#/definitions/signal/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"};i===null?i=[a]:i.push(a),p++}if(t.detector!==void 0){let s=t.detector;if(typeof s!="string"){const a={instancePath:g+"/signals/"+r+"/detector",schemaPath:"#/definitions/signal/properties/detector/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[a]:i.push(a),p++}if(!(s==="D1_SPINNER"||s==="D2_STOP_BUTTON"||s==="D3_CARD_HEUR")){const a={instancePath:g+"/signals/"+r+"/detector",schemaPath:"#/definitions/signal/properties/detector/enum",keyword:"enum",params:{allowedValues:d.properties.detector.enum},message:"must be equal to one of the allowed values"};i===null?i=[a]:i.push(a),p++}}if(t.evidence!==void 0){let s=t.evidence;if(typeof s=="string"){if(c(s)<1){const a={instancePath:g+"/signals/"+r+"/evidence",schemaPath:"#/definitions/signal/properties/evidence/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};i===null?i=[a]:i.push(a),p++}}else{const a={instancePath:g+"/signals/"+r+"/evidence",schemaPath:"#/definitions/signal/properties/evidence/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[a]:i.push(a),p++}}if(t.taskKey!==void 0){let s=t.taskKey;if(typeof s=="string"){if(c(s)<1){const a={instancePath:g+"/signals/"+r+"/taskKey",schemaPath:"#/definitions/signal/properties/taskKey/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};i===null?i=[a]:i.push(a),p++}}else{const a={instancePath:g+"/signals/"+r+"/taskKey",schemaPath:"#/definitions/signal/properties/taskKey/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[a]:i.push(a),p++}}}else{const s={instancePath:g+"/signals/"+r,schemaPath:"#/definitions/signal/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[s]:i.push(s),p++}}}else{const n={instancePath:g+"/signals",schemaPath:"#/properties/signals/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[n]:i.push(n),p++}}if(f.ts!==void 0){let e=f.ts;if(!(typeof e=="number"&&isFinite(e))){const n={instancePath:g+"/ts",schemaPath:"#/properties/ts/type",keyword:"type",params:{type:"number"},message:"must be number"};i===null?i=[n]:i.push(n),p++}}}else{const e={instancePath:g,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[e]:i.push(e),p++}return v.errors=i,p===0}return v.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1},v})();function H(d){return F(d)}function ee(d){if(!H(d))throw new $("ContentScriptTasksUpdate",F.errors??[])}const C=(()=>{const d={properties:{locale:{enum:["en","ru"]}}},y=x,c={properties:{heartbeatStatus:{enum:["OK","STALE"]}}},v={properties:{detector:{enum:["D1_SPINNER","D2_STOP_BUTTON","D3_CARD_HEUR"]}}},f=O,g=I;function w(u,{instancePath:i="",parentData:p,parentDataProperty:b,rootData:e=u,dynamicAnchors:n={}}={}){let r=null,t=0;const s=w.evaluated;if(s.dynamicProps&&(s.props=void 0),s.dynamicItems&&(s.items=void 0),u&&typeof u=="object"&&!Array.isArray(u)){if(u.tabId===void 0){const a={instancePath:i,schemaPath:"#/required",keyword:"required",params:{missingProperty:"tabId"},message:"must have required property 'tabId'"};r===null?r=[a]:r.push(a),t++}if(u.title===void 0){const a={instancePath:i,schemaPath:"#/required",keyword:"required",params:{missingProperty:"title"},message:"must have required property 'title'"};r===null?r=[a]:r.push(a),t++}if(u.origin===void 0){const a={instancePath:i,schemaPath:"#/required",keyword:"required",params:{missingProperty:"origin"},message:"must have required property 'origin'"};r===null?r=[a]:r.push(a),t++}if(u.count===void 0){const a={instancePath:i,schemaPath:"#/required",keyword:"required",params:{missingProperty:"count"},message:"must have required property 'count'"};r===null?r=[a]:r.push(a),t++}if(u.signals===void 0){const a={instancePath:i,schemaPath:"#/required",keyword:"required",params:{missingProperty:"signals"},message:"must have required property 'signals'"};r===null?r=[a]:r.push(a),t++}for(const a in u)if(!(a==="tabId"||a==="title"||a==="origin"||a==="count"||a==="lastSeenAt"||a==="heartbeatStatus"||a==="signals")){const l={instancePath:i,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:a},message:"must NOT have additional properties"};r===null?r=[l]:r.push(l),t++}if(u.tabId!==void 0){let a=u.tabId;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){const l={instancePath:i+"/tabId",schemaPath:"#/properties/tabId/type",keyword:"type",params:{type:"integer"},message:"must be integer"};r===null?r=[l]:r.push(l),t++}if(typeof a=="number"&&isFinite(a)&&(a<1||isNaN(a))){const l={instancePath:i+"/tabId",schemaPath:"#/properties/tabId/minimum",keyword:"minimum",params:{comparison:">=",limit:1},message:"must be >= 1"};r===null?r=[l]:r.push(l),t++}}if(u.title!==void 0){let a=u.title;if(typeof a=="string"){if(f(a)<1){const l={instancePath:i+"/title",schemaPath:"#/properties/title/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};r===null?r=[l]:r.push(l),t++}}else{const l={instancePath:i+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"};r===null?r=[l]:r.push(l),t++}}if(u.origin!==void 0){let a=u.origin;if(typeof a=="string"){if(!g(a)){const l={instancePath:i+"/origin",schemaPath:"#/properties/origin/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'};r===null?r=[l]:r.push(l),t++}}else{const l={instancePath:i+"/origin",schemaPath:"#/properties/origin/type",keyword:"type",params:{type:"string"},message:"must be string"};r===null?r=[l]:r.push(l),t++}}if(u.count!==void 0){let a=u.count;if(!(typeof a=="number"&&!(a%1)&&!isNaN(a)&&isFinite(a))){const l={instancePath:i+"/count",schemaPath:"#/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer"};r===null?r=[l]:r.push(l),t++}if(typeof a=="number"&&isFinite(a)&&(a<0||isNaN(a))){const l={instancePath:i+"/count",schemaPath:"#/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};r===null?r=[l]:r.push(l),t++}}if(u.lastSeenAt!==void 0){let a=u.lastSeenAt;if(!(typeof a=="number"&&isFinite(a))){const l={instancePath:i+"/lastSeenAt",schemaPath:"#/properties/lastSeenAt/type",keyword:"type",params:{type:"number"},message:"must be number"};r===null?r=[l]:r.push(l),t++}}if(u.heartbeatStatus!==void 0){let a=u.heartbeatStatus;if(typeof a!="string"){const l={instancePath:i+"/heartbeatStatus",schemaPath:"#/properties/heartbeatStatus/type",keyword:"type",params:{type:"string"},message:"must be string"};r===null?r=[l]:r.push(l),t++}if(!(a==="OK"||a==="STALE")){const l={instancePath:i+"/heartbeatStatus",schemaPath:"#/properties/heartbeatStatus/enum",keyword:"enum",params:{allowedValues:c.properties.heartbeatStatus.enum},message:"must be equal to one of the allowed values"};r===null?r=[l]:r.push(l),t++}}if(u.signals!==void 0){let a=u.signals;if(Array.isArray(a)){const l=a.length;for(let h=0;h<l;h++){let A=a[h];if(A&&typeof A=="object"&&!Array.isArray(A)){if(A.detector===void 0){const k={instancePath:i+"/signals/"+h,schemaPath:"./content-update.schema.json#/definitions/signal/required",keyword:"required",params:{missingProperty:"detector"},message:"must have required property 'detector'"};r===null?r=[k]:r.push(k),t++}if(A.evidence===void 0){const k={instancePath:i+"/signals/"+h,schemaPath:"./content-update.schema.json#/definitions/signal/required",keyword:"required",params:{missingProperty:"evidence"},message:"must have required property 'evidence'"};r===null?r=[k]:r.push(k),t++}for(const k in A)if(!(k==="detector"||k==="evidence"||k==="taskKey")){const T={instancePath:i+"/signals/"+h,schemaPath:"./content-update.schema.json#/definitions/signal/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:k},message:"must NOT have additional properties"};r===null?r=[T]:r.push(T),t++}if(A.detector!==void 0){let k=A.detector;if(typeof k!="string"){const T={instancePath:i+"/signals/"+h+"/detector",schemaPath:"./content-update.schema.json#/definitions/signal/properties/detector/type",keyword:"type",params:{type:"string"},message:"must be string"};r===null?r=[T]:r.push(T),t++}if(!(k==="D1_SPINNER"||k==="D2_STOP_BUTTON"||k==="D3_CARD_HEUR")){const T={instancePath:i+"/signals/"+h+"/detector",schemaPath:"./content-update.schema.json#/definitions/signal/properties/detector/enum",keyword:"enum",params:{allowedValues:v.properties.detector.enum},message:"must be equal to one of the allowed values"};r===null?r=[T]:r.push(T),t++}}if(A.evidence!==void 0){let k=A.evidence;if(typeof k=="string"){if(f(k)<1){const T={instancePath:i+"/signals/"+h+"/evidence",schemaPath:"./content-update.schema.json#/definitions/signal/properties/evidence/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};r===null?r=[T]:r.push(T),t++}}else{const T={instancePath:i+"/signals/"+h+"/evidence",schemaPath:"./content-update.schema.json#/definitions/signal/properties/evidence/type",keyword:"type",params:{type:"string"},message:"must be string"};r===null?r=[T]:r.push(T),t++}}if(A.taskKey!==void 0){let k=A.taskKey;if(typeof k=="string"){if(f(k)<1){const T={instancePath:i+"/signals/"+h+"/taskKey",schemaPath:"./content-update.schema.json#/definitions/signal/properties/taskKey/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};r===null?r=[T]:r.push(T),t++}}else{const T={instancePath:i+"/signals/"+h+"/taskKey",schemaPath:"./content-update.schema.json#/definitions/signal/properties/taskKey/type",keyword:"type",params:{type:"string"},message:"must be string"};r===null?r=[T]:r.push(T),t++}}}else{const k={instancePath:i+"/signals/"+h,schemaPath:"./content-update.schema.json#/definitions/signal/type",keyword:"type",params:{type:"object"},message:"must be object"};r===null?r=[k]:r.push(k),t++}}}else{const l={instancePath:i+"/signals",schemaPath:"#/properties/signals/type",keyword:"type",params:{type:"array"},message:"must be array"};r===null?r=[l]:r.push(l),t++}}}else{const a={instancePath:i,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};r===null?r=[a]:r.push(a),t++}return w.errors=r,t===0}w.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};const m=new RegExp("^[a-zA-Z0-9_.-]+$","u");function o(u,{instancePath:i="",parentData:p,parentDataProperty:b,rootData:e=u,dynamicAnchors:n={}}={}){let r=null,t=0;const s=o.evaluated;if(s.dynamicProps&&(s.props=void 0),s.dynamicItems&&(s.items=void 0),u&&typeof u=="object"&&!Array.isArray(u)){if(u.generatedAt===void 0){const l={instancePath:i,schemaPath:"#/required",keyword:"required",params:{missingProperty:"generatedAt"},message:"must have required property 'generatedAt'"};r===null?r=[l]:r.push(l),t++}if(u.tabs===void 0){const l={instancePath:i,schemaPath:"#/required",keyword:"required",params:{missingProperty:"tabs"},message:"must have required property 'tabs'"};r===null?r=[l]:r.push(l),t++}if(u.totalActive===void 0){const l={instancePath:i,schemaPath:"#/required",keyword:"required",params:{missingProperty:"totalActive"},message:"must have required property 'totalActive'"};r===null?r=[l]:r.push(l),t++}if(u.locale===void 0){const l={instancePath:i,schemaPath:"#/required",keyword:"required",params:{missingProperty:"locale"},message:"must have required property 'locale'"};r===null?r=[l]:r.push(l),t++}for(const l in u)if(!(l==="generatedAt"||l==="totalActive"||l==="tabs"||l==="locale"||l==="messages")){const h={instancePath:i,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:l},message:"must NOT have additional properties"};r===null?r=[h]:r.push(h),t++}if(u.generatedAt!==void 0){let l=u.generatedAt;if(typeof l=="string"){if(!y.validate(l)){const h={instancePath:i+"/generatedAt",schemaPath:"#/properties/generatedAt/format",keyword:"format",params:{format:"date-time"},message:'must match format "date-time"'};r===null?r=[h]:r.push(h),t++}}else{const h={instancePath:i+"/generatedAt",schemaPath:"#/properties/generatedAt/type",keyword:"type",params:{type:"string"},message:"must be string"};r===null?r=[h]:r.push(h),t++}}if(u.totalActive!==void 0){let l=u.totalActive;if(!(typeof l=="number"&&!(l%1)&&!isNaN(l)&&isFinite(l))){const h={instancePath:i+"/totalActive",schemaPath:"#/properties/totalActive/type",keyword:"type",params:{type:"integer"},message:"must be integer"};r===null?r=[h]:r.push(h),t++}if(typeof l=="number"&&isFinite(l)&&(l<0||isNaN(l))){const h={instancePath:i+"/totalActive",schemaPath:"#/properties/totalActive/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};r===null?r=[h]:r.push(h),t++}}if(u.tabs!==void 0){let l=u.tabs;if(Array.isArray(l)){const h=l.length;for(let A=0;A<h;A++)w(l[A],{instancePath:i+"/tabs/"+A,parentData:l,parentDataProperty:A,rootData:e,dynamicAnchors:n})||(r=r===null?w.errors:r.concat(w.errors),t=r.length)}else{const h={instancePath:i+"/tabs",schemaPath:"#/properties/tabs/type",keyword:"type",params:{type:"array"},message:"must be array"};r===null?r=[h]:r.push(h),t++}}if(u.locale!==void 0){let l=u.locale;if(typeof l!="string"){const h={instancePath:i+"/locale",schemaPath:"#/properties/locale/type",keyword:"type",params:{type:"string"},message:"must be string"};r===null?r=[h]:r.push(h),t++}if(!(l==="en"||l==="ru")){const h={instancePath:i+"/locale",schemaPath:"#/properties/locale/enum",keyword:"enum",params:{allowedValues:d.properties.locale.enum},message:"must be equal to one of the allowed values"};r===null?r=[h]:r.push(h),t++}}if(u.messages!==void 0){let l=u.messages;if(l&&typeof l=="object"&&!Array.isArray(l)){var a={};for(const h in l)if(m.test(h)){if(typeof l[h]!="string"){const A={instancePath:i+"/messages/"+h.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/messages/patternProperties/%5E%5Ba-zA-Z0-9_.-%5D%2B%24/type",keyword:"type",params:{type:"string"},message:"must be string"};r===null?r=[A]:r.push(A),t++}a[h]=!0}}else{const h={instancePath:i+"/messages",schemaPath:"#/properties/messages/type",keyword:"type",params:{type:"object"},message:"must be object"};r===null?r=[h]:r.push(h),t++}}}else{const l={instancePath:i,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};r===null?r=[l]:r.push(l),t++}return o.errors=r,t===0}return o.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1},o})();function B(d){return C(d)}function te(d){if(!B(d))throw new $("PopupRenderState",C.errors??[])}const M=(()=>{const d={properties:{status:{enum:["OK","STALE"]}}},y=I,c=O,v={properties:{detector:{enum:["D1_SPINNER","D2_STOP_BUTTON","D3_CARD_HEUR"]}}};function f(m,{instancePath:o="",parentData:u,parentDataProperty:i,rootData:p=m,dynamicAnchors:b={}}={}){let e=null,n=0;const r=f.evaluated;if(r.dynamicProps&&(r.props=void 0),r.dynamicItems&&(r.items=void 0),m&&typeof m=="object"&&!Array.isArray(m)){if(m.detector===void 0){const t={instancePath:o,schemaPath:"../dto/content-update.schema.json#/definitions/signal/required",keyword:"required",params:{missingProperty:"detector"},message:"must have required property 'detector'"};e===null?e=[t]:e.push(t),n++}if(m.evidence===void 0){const t={instancePath:o,schemaPath:"../dto/content-update.schema.json#/definitions/signal/required",keyword:"required",params:{missingProperty:"evidence"},message:"must have required property 'evidence'"};e===null?e=[t]:e.push(t),n++}for(const t in m)if(!(t==="detector"||t==="evidence"||t==="taskKey")){const s={instancePath:o,schemaPath:"../dto/content-update.schema.json#/definitions/signal/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:t},message:"must NOT have additional properties"};e===null?e=[s]:e.push(s),n++}if(m.detector!==void 0){let t=m.detector;if(typeof t!="string"){const s={instancePath:o+"/detector",schemaPath:"../dto/content-update.schema.json#/definitions/signal/properties/detector/type",keyword:"type",params:{type:"string"},message:"must be string"};e===null?e=[s]:e.push(s),n++}if(!(t==="D1_SPINNER"||t==="D2_STOP_BUTTON"||t==="D3_CARD_HEUR")){const s={instancePath:o+"/detector",schemaPath:"../dto/content-update.schema.json#/definitions/signal/properties/detector/enum",keyword:"enum",params:{allowedValues:v.properties.detector.enum},message:"must be equal to one of the allowed values"};e===null?e=[s]:e.push(s),n++}}if(m.evidence!==void 0){let t=m.evidence;if(typeof t=="string"){if(c(t)<1){const s={instancePath:o+"/evidence",schemaPath:"../dto/content-update.schema.json#/definitions/signal/properties/evidence/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};e===null?e=[s]:e.push(s),n++}}else{const s={instancePath:o+"/evidence",schemaPath:"../dto/content-update.schema.json#/definitions/signal/properties/evidence/type",keyword:"type",params:{type:"string"},message:"must be string"};e===null?e=[s]:e.push(s),n++}}if(m.taskKey!==void 0){let t=m.taskKey;if(typeof t=="string"){if(c(t)<1){const s={instancePath:o+"/taskKey",schemaPath:"../dto/content-update.schema.json#/definitions/signal/properties/taskKey/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};e===null?e=[s]:e.push(s),n++}}else{const s={instancePath:o+"/taskKey",schemaPath:"../dto/content-update.schema.json#/definitions/signal/properties/taskKey/type",keyword:"type",params:{type:"string"},message:"must be string"};e===null?e=[s]:e.push(s),n++}}}else{const t={instancePath:o,schemaPath:"../dto/content-update.schema.json#/definitions/signal/type",keyword:"type",params:{type:"object"},message:"must be object"};e===null?e=[t]:e.push(t),n++}return f.errors=e,n===0}f.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function g(m,{instancePath:o="",parentData:u,parentDataProperty:i,rootData:p=m,dynamicAnchors:b={}}={}){let e=null,n=0;const r=g.evaluated;if(r.dynamicProps&&(r.props=void 0),r.dynamicItems&&(r.items=void 0),m&&typeof m=="object"&&!Array.isArray(m)){if(m.origin===void 0){const t={instancePath:o,schemaPath:"#/required",keyword:"required",params:{missingProperty:"origin"},message:"must have required property 'origin'"};e===null?e=[t]:e.push(t),n++}if(m.title===void 0){const t={instancePath:o,schemaPath:"#/required",keyword:"required",params:{missingProperty:"title"},message:"must have required property 'title'"};e===null?e=[t]:e.push(t),n++}if(m.count===void 0){const t={instancePath:o,schemaPath:"#/required",keyword:"required",params:{missingProperty:"count"},message:"must have required property 'count'"};e===null?e=[t]:e.push(t),n++}if(m.active===void 0){const t={instancePath:o,schemaPath:"#/required",keyword:"required",params:{missingProperty:"active"},message:"must have required property 'active'"};e===null?e=[t]:e.push(t),n++}if(m.updatedAt===void 0){const t={instancePath:o,schemaPath:"#/required",keyword:"required",params:{missingProperty:"updatedAt"},message:"must have required property 'updatedAt'"};e===null?e=[t]:e.push(t),n++}if(m.lastSeenAt===void 0){const t={instancePath:o,schemaPath:"#/required",keyword:"required",params:{missingProperty:"lastSeenAt"},message:"must have required property 'lastSeenAt'"};e===null?e=[t]:e.push(t),n++}if(m.heartbeat===void 0){const t={instancePath:o,schemaPath:"#/required",keyword:"required",params:{missingProperty:"heartbeat"},message:"must have required property 'heartbeat'"};e===null?e=[t]:e.push(t),n++}for(const t in m)if(!(t==="origin"||t==="title"||t==="count"||t==="active"||t==="updatedAt"||t==="lastSeenAt"||t==="heartbeat"||t==="signals")){const s={instancePath:o,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:t},message:"must NOT have additional properties"};e===null?e=[s]:e.push(s),n++}if(m.origin!==void 0){let t=m.origin;if(typeof t=="string"){if(!y(t)){const s={instancePath:o+"/origin",schemaPath:"#/properties/origin/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'};e===null?e=[s]:e.push(s),n++}}else{const s={instancePath:o+"/origin",schemaPath:"#/properties/origin/type",keyword:"type",params:{type:"string"},message:"must be string"};e===null?e=[s]:e.push(s),n++}}if(m.title!==void 0){let t=m.title;if(typeof t=="string"){if(c(t)<1){const s={instancePath:o+"/title",schemaPath:"#/properties/title/minLength",keyword:"minLength",params:{limit:1},message:"must NOT have fewer than 1 characters"};e===null?e=[s]:e.push(s),n++}}else{const s={instancePath:o+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"};e===null?e=[s]:e.push(s),n++}}if(m.count!==void 0){let t=m.count;if(!(typeof t=="number"&&!(t%1)&&!isNaN(t)&&isFinite(t))){const s={instancePath:o+"/count",schemaPath:"#/properties/count/type",keyword:"type",params:{type:"integer"},message:"must be integer"};e===null?e=[s]:e.push(s),n++}if(typeof t=="number"&&isFinite(t)&&(t<0||isNaN(t))){const s={instancePath:o+"/count",schemaPath:"#/properties/count/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};e===null?e=[s]:e.push(s),n++}}if(m.active!==void 0&&typeof m.active!="boolean"){const t={instancePath:o+"/active",schemaPath:"#/properties/active/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};e===null?e=[t]:e.push(t),n++}if(m.updatedAt!==void 0){let t=m.updatedAt;if(!(typeof t=="number"&&isFinite(t))){const s={instancePath:o+"/updatedAt",schemaPath:"#/properties/updatedAt/type",keyword:"type",params:{type:"number"},message:"must be number"};e===null?e=[s]:e.push(s),n++}}if(m.lastSeenAt!==void 0){let t=m.lastSeenAt;if(!(typeof t=="number"&&isFinite(t))){const s={instancePath:o+"/lastSeenAt",schemaPath:"#/properties/lastSeenAt/type",keyword:"type",params:{type:"number"},message:"must be number"};e===null?e=[s]:e.push(s),n++}}if(m.heartbeat!==void 0){let t=m.heartbeat;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.lastReceivedAt===void 0){const s={instancePath:o+"/heartbeat",schemaPath:"#/definitions/heartbeatState/required",keyword:"required",params:{missingProperty:"lastReceivedAt"},message:"must have required property 'lastReceivedAt'"};e===null?e=[s]:e.push(s),n++}if(t.expectedIntervalMs===void 0){const s={instancePath:o+"/heartbeat",schemaPath:"#/definitions/heartbeatState/required",keyword:"required",params:{missingProperty:"expectedIntervalMs"},message:"must have required property 'expectedIntervalMs'"};e===null?e=[s]:e.push(s),n++}if(t.status===void 0){const s={instancePath:o+"/heartbeat",schemaPath:"#/definitions/heartbeatState/required",keyword:"required",params:{missingProperty:"status"},message:"must have required property 'status'"};e===null?e=[s]:e.push(s),n++}if(t.missedCount===void 0){const s={instancePath:o+"/heartbeat",schemaPath:"#/definitions/heartbeatState/required",keyword:"required",params:{missingProperty:"missedCount"},message:"must have required property 'missedCount'"};e===null?e=[s]:e.push(s),n++}for(const s in t)if(!(s==="lastReceivedAt"||s==="expectedIntervalMs"||s==="status"||s==="missedCount")){const a={instancePath:o+"/heartbeat",schemaPath:"#/definitions/heartbeatState/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"};e===null?e=[a]:e.push(a),n++}if(t.lastReceivedAt!==void 0){let s=t.lastReceivedAt;if(typeof s=="number"&&isFinite(s)){if(s<0||isNaN(s)){const a={instancePath:o+"/heartbeat/lastReceivedAt",schemaPath:"#/definitions/heartbeatState/properties/lastReceivedAt/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};e===null?e=[a]:e.push(a),n++}}else{const a={instancePath:o+"/heartbeat/lastReceivedAt",schemaPath:"#/definitions/heartbeatState/properties/lastReceivedAt/type",keyword:"type",params:{type:"number"},message:"must be number"};e===null?e=[a]:e.push(a),n++}}if(t.expectedIntervalMs!==void 0){let s=t.expectedIntervalMs;if(!(typeof s=="number"&&!(s%1)&&!isNaN(s)&&isFinite(s))){const a={instancePath:o+"/heartbeat/expectedIntervalMs",schemaPath:"#/definitions/heartbeatState/properties/expectedIntervalMs/type",keyword:"type",params:{type:"integer"},message:"must be integer"};e===null?e=[a]:e.push(a),n++}if(typeof s=="number"&&isFinite(s)){if(s>6e4||isNaN(s)){const a={instancePath:o+"/heartbeat/expectedIntervalMs",schemaPath:"#/definitions/heartbeatState/properties/expectedIntervalMs/maximum",keyword:"maximum",params:{comparison:"<=",limit:6e4},message:"must be <= 60000"};e===null?e=[a]:e.push(a),n++}if(s<1e3||isNaN(s)){const a={instancePath:o+"/heartbeat/expectedIntervalMs",schemaPath:"#/definitions/heartbeatState/properties/expectedIntervalMs/minimum",keyword:"minimum",params:{comparison:">=",limit:1e3},message:"must be >= 1000"};e===null?e=[a]:e.push(a),n++}}}if(t.status!==void 0){let s=t.status;if(typeof s!="string"){const a={instancePath:o+"/heartbeat/status",schemaPath:"#/definitions/heartbeatState/properties/status/type",keyword:"type",params:{type:"string"},message:"must be string"};e===null?e=[a]:e.push(a),n++}if(!(s==="OK"||s==="STALE")){const a={instancePath:o+"/heartbeat/status",schemaPath:"#/definitions/heartbeatState/properties/status/enum",keyword:"enum",params:{allowedValues:d.properties.status.enum},message:"must be equal to one of the allowed values"};e===null?e=[a]:e.push(a),n++}}if(t.missedCount!==void 0){let s=t.missedCount;if(!(typeof s=="number"&&!(s%1)&&!isNaN(s)&&isFinite(s))){const a={instancePath:o+"/heartbeat/missedCount",schemaPath:"#/definitions/heartbeatState/properties/missedCount/type",keyword:"type",params:{type:"integer"},message:"must be integer"};e===null?e=[a]:e.push(a),n++}if(typeof s=="number"&&isFinite(s)&&(s<0||isNaN(s))){const a={instancePath:o+"/heartbeat/missedCount",schemaPath:"#/definitions/heartbeatState/properties/missedCount/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};e===null?e=[a]:e.push(a),n++}}}else{const s={instancePath:o+"/heartbeat",schemaPath:"#/definitions/heartbeatState/type",keyword:"type",params:{type:"object"},message:"must be object"};e===null?e=[s]:e.push(s),n++}}if(m.signals!==void 0){let t=m.signals;if(Array.isArray(t)){const s=t.length;for(let a=0;a<s;a++)f(t[a],{instancePath:o+"/signals/"+a,parentData:t,parentDataProperty:a,rootData:p,dynamicAnchors:b})||(e=e===null?f.errors:e.concat(f.errors),n=e.length)}else{const s={instancePath:o+"/signals",schemaPath:"#/properties/signals/type",keyword:"type",params:{type:"array"},message:"must be array"};e===null?e=[s]:e.push(s),n++}}}else{const t={instancePath:o,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};e===null?e=[t]:e.push(t),n++}return g.errors=e,n===0}g.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1};function w(m,{instancePath:o="",parentData:u,parentDataProperty:i,rootData:p=m,dynamicAnchors:b={}}={}){let e=null,n=0;const r=w.evaluated;if(r.dynamicProps&&(r.props=void 0),r.dynamicItems&&(r.items=void 0),m&&typeof m=="object"&&!Array.isArray(m)){if(m.tabs===void 0){const t={instancePath:o,schemaPath:"#/required",keyword:"required",params:{missingProperty:"tabs"},message:"must have required property 'tabs'"};e===null?e=[t]:e.push(t),n++}if(m.lastTotal===void 0){const t={instancePath:o,schemaPath:"#/required",keyword:"required",params:{missingProperty:"lastTotal"},message:"must have required property 'lastTotal'"};e===null?e=[t]:e.push(t),n++}if(m.debounce===void 0){const t={instancePath:o,schemaPath:"#/required",keyword:"required",params:{missingProperty:"debounce"},message:"must have required property 'debounce'"};e===null?e=[t]:e.push(t),n++}for(const t in m)if(!(t==="tabs"||t==="lastTotal"||t==="debounce")){const s={instancePath:o,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:t},message:"must NOT have additional properties"};e===null?e=[s]:e.push(s),n++}if(m.tabs!==void 0){let t=m.tabs;if(t&&typeof t=="object"&&!Array.isArray(t))for(const s in t)g(t[s],{instancePath:o+"/tabs/"+s.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:t,parentDataProperty:s,rootData:p,dynamicAnchors:b})||(e=e===null?g.errors:e.concat(g.errors),n=e.length);else{const s={instancePath:o+"/tabs",schemaPath:"#/properties/tabs/type",keyword:"type",params:{type:"object"},message:"must be object"};e===null?e=[s]:e.push(s),n++}}if(m.lastTotal!==void 0){let t=m.lastTotal;if(!(typeof t=="number"&&!(t%1)&&!isNaN(t)&&isFinite(t))){const s={instancePath:o+"/lastTotal",schemaPath:"#/properties/lastTotal/type",keyword:"type",params:{type:"integer"},message:"must be integer"};e===null?e=[s]:e.push(s),n++}if(typeof t=="number"&&isFinite(t)&&(t<0||isNaN(t))){const s={instancePath:o+"/lastTotal",schemaPath:"#/properties/lastTotal/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};e===null?e=[s]:e.push(s),n++}}if(m.debounce!==void 0){let t=m.debounce;if(t&&typeof t=="object"&&!Array.isArray(t)){if(t.ms===void 0){const s={instancePath:o+"/debounce",schemaPath:"#/definitions/debounceState/required",keyword:"required",params:{missingProperty:"ms"},message:"must have required property 'ms'"};e===null?e=[s]:e.push(s),n++}if(t.since===void 0){const s={instancePath:o+"/debounce",schemaPath:"#/definitions/debounceState/required",keyword:"required",params:{missingProperty:"since"},message:"must have required property 'since'"};e===null?e=[s]:e.push(s),n++}for(const s in t)if(!(s==="ms"||s==="since")){const a={instancePath:o+"/debounce",schemaPath:"#/definitions/debounceState/additionalProperties",keyword:"additionalProperties",params:{additionalProperty:s},message:"must NOT have additional properties"};e===null?e=[a]:e.push(a),n++}if(t.ms!==void 0){let s=t.ms;if(!(typeof s=="number"&&!(s%1)&&!isNaN(s)&&isFinite(s))){const a={instancePath:o+"/debounce/ms",schemaPath:"#/definitions/debounceState/properties/ms/type",keyword:"type",params:{type:"integer"},message:"must be integer"};e===null?e=[a]:e.push(a),n++}if(typeof s=="number"&&isFinite(s)){if(s>6e4||isNaN(s)){const a={instancePath:o+"/debounce/ms",schemaPath:"#/definitions/debounceState/properties/ms/maximum",keyword:"maximum",params:{comparison:"<=",limit:6e4},message:"must be <= 60000"};e===null?e=[a]:e.push(a),n++}if(s<0||isNaN(s)){const a={instancePath:o+"/debounce/ms",schemaPath:"#/definitions/debounceState/properties/ms/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};e===null?e=[a]:e.push(a),n++}}}if(t.since!==void 0){let s=t.since;if(typeof s=="number"&&isFinite(s)){if(s<0||isNaN(s)){const a={instancePath:o+"/debounce/since",schemaPath:"#/definitions/debounceState/properties/since/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"};e===null?e=[a]:e.push(a),n++}}else{const a={instancePath:o+"/debounce/since",schemaPath:"#/definitions/debounceState/properties/since/type",keyword:"type",params:{type:"number"},message:"must be number"};e===null?e=[a]:e.push(a),n++}}}else{const s={instancePath:o+"/debounce",schemaPath:"#/definitions/debounceState/type",keyword:"type",params:{type:"object"},message:"must be object"};e===null?e=[s]:e.push(s),n++}}}else{const t={instancePath:o,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"};e===null?e=[t]:e.push(t),n++}return w.errors=e,n===0}return w.evaluated={props:!0,dynamicProps:!1,dynamicItems:!1},w})();function V(d){return M(d)}function se(d){if(!V(d))throw new $("AggregatedTabsState",M.errors??[])}function Z(){if(typeof globalThis.chrome>"u")throw new Error("Chrome APIs are not available in this environment");return globalThis.chrome}function re(){return Z()}const U=Symbol("codex.logger.context");function Y(d,y=console){const c=d?`[${d}]`:"",v={debug:(...f)=>y.debug(c,...f),info:(...f)=>y.info(c,...f),warn:(...f)=>y.warn(c,...f),error:(...f)=>y.error(c,...f)};return v[U]={consoleRef:y},v}function ie(d,y){const c=d[U],v=(c==null?void 0:c.consoleRef)??console;return Y(y,v)}function G(d,y){const c=(...v)=>d(...v);return c.cancel=y.cancel,c.flush=y.flush,c.pending=y.pending,c}function ae(d,y,c={}){const{leading:v=!0,trailing:f=!0,now:g=Date.now}=c;let w=0,m,o;const u=(r,t)=>{w=r,o=void 0,d(...t)},i=()=>{if(!o||m)return;const r=Math.max(0,y-(g()-w));m=setTimeout(()=>{if(m=void 0,f){const t=o;o=void 0,t&&u(g(),t)}},r)};return G((...r)=>{const t=g();!w&&!v&&(w=t);const s=y-(t-w);o=r,s<=0||s>y?(m&&(clearTimeout(m),m=void 0),u(t,r)):!m&&f&&i()},{cancel:()=>{m&&(clearTimeout(m),m=void 0),o=void 0,w=0},flush:()=>{m&&o&&(clearTimeout(m),m=void 0,u(g(),o)),o=void 0},pending:()=>!!m})}let X=1;const D=new Map;function W(d,y){const c=Date.now(),v=(y==null?void 0:y.timeout)??0,f=X++,g=v>0?Math.min(v,50):1,w=setTimeout(()=>{D.delete(f);const o={didTimeout:v>0&&Date.now()-c>=v,timeRemaining(){const u=Date.now()-c;return Math.max(0,50-u)}};d(o)},g);return D.set(f,w),f}function J(d){const y=D.get(d);y&&(clearTimeout(y),D.delete(d))}function oe(d=globalThis){d.requestIdleCallback||(d.requestIdleCallback=W),d.cancelIdleCallback||(d.cancelIdleCallback=J)}export{ie as a,se as b,Y as c,te as d,ee as e,Q as f,oe as g,re as r,ae as t};
